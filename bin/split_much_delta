#!/bin/bash
#
# accepts input where on each line second column is time in format: HH:MM.
# Searches for lines where delta time more than 60 minutes and then puts empty
# line between them as delimiter
#
# mostly for usage in qtb_export_history and mh (mpv history)

awk '{
    split($2,time,":");
    tmins=(time[1] * 60) + time[2]
    dmins=tmins - prev_tmins
    if (prev_tmins && dmins > 60) {
        print ""
    }
    print $0

    prev_tmins=tmins
}'
